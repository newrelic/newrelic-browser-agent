<!DOCTYPE html>
<!--
  Copyright 2020 New Relic Corporation.
  PDX-License-Identifier: Apache-2.0
-->
<html>

<head>
    <title>RUM Unit Test</title>
    <!-- {init}
    {config} -->
    <!-- {loader} -->    
    <link rel="modulepreload" href="./js/module-worker.js" type="text/javascript">
</head>

<body>
    This is a generic page that is instrumented by the JS agent.
    <script type="text/javascript">
        NREUM = {
            info: {
                applicationID: 601303348,
                licenseKey: 'a60cc46d05',
                beacon: 'bam.nr-data.net',
                errorBeacon: 'bam.nr-data.net',
            },
            init: {
                ssl: true
            }
        }
        const worker = new Worker("./js/module-worker.js", {type: "module"})

        const opts = NREUM

        worker.postMessage({ type: 'startAgent', payload: opts })

        worker.onmessage = function (e) {
            console.log('message from worker.js', e)
        }

        worker.onerror = function (e) {
            console.log("worker error -- ", e)
        }
    </script>
</body>

</html>