<!DOCTYPE html>
<!--
  Copyright 2020 New Relic Corporation.
  PDX-License-Identifier: Apache-2.0
-->
<html>
  <head>
    <title>Basic XHR test</title>
    {init} {config} {loader}
    <script type="text/javascript">
      var count = 0
      function sendHello() {
        var xhr = new XMLHttpRequest()
        xhr.open('GET', '/json')
        xhr.setRequestHeader('Content-Type', 'text/plain')
        xhr.onload = function (e) {
          if (count < 50) {
            count++
            sendHello()
          }
        }
        xhr.send()
      }
      setTimeout(function () {
        sendHello()
      }, 2000)
    </script>
  </head>
  <body>
    This page sends 3000 XHRs after the window has loaded.
  </body>
</html>
