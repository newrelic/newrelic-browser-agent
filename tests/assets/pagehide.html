<!DOCTYPE html>
<html>
  <head>
    <title>RUM Unit Test</title>
    {config}
    {loader}
  </head>
  <body>
    <div id="initial">initial content</div>

    <!-- this is clicked by the test to trigger first interaction -->
    <button id="btn1">hide page</button>

    <script>
      var btn = document.getElementById('btn1')
      btn.addEventListener('click', run)

      function run() {
        // simulate page hide by dispatching the event manually
        Object.defineProperty(document, 'visibilityState', {value: 'visible', writable: true})
        document.visibilityState = 'hidden'
        document.dispatchEvent(new Event("visibilitychange"))
      }

    </script>
  </body>
</html>
